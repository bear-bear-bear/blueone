(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[306],{39983:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(67294),i=r(11163),o=r(87217);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirectTo,r=e.redirectIfFound,u=void 0!==r&&r,c=(0,i.useRouter)(),s=(0,o.Z)({redirectTo:t,redirectIfFound:u}),a=s.user,l=s.mutateUser,d=s.isLoggedIn,p="admin"===(null===a||void 0===a?void 0:a.role);return(0,n.useEffect)((function(){t&&d&&(p||c.push(t))}),[d,p,t,c]),{user:a,mutateUser:l,isAdminLoggedIn:d&&p}}},87217:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(67294),i=r(11163),o=r(40821),u=r(82780),c="/user",s={onErrorRetry:function(e,t,r,n,i){var o=i.retryCount;t!==c&&(o>=10||setTimeout((function(){return n({retryCount:o})}),5e3))}};function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.redirectTo,a=t.redirectIfFound,l=(0,i.useRouter)(),d=(0,o.ZP)(c,u.F,s),p=d.data,f=d.mutate,h=d.error,m=!h&&!!p,g=!h&&!p;return console.group('SWR Fetched "/user"'),console.log("data:",p),console.log("error:",null===h||void 0===h||null===(e=h.response)||void 0===e?void 0:e.data.message),console.log("isLoggedIn:",m),console.log("isNotFetched:",g),console.groupEnd(),(0,n.useEffect)((function(){r&&(g||(!a&&!m||a&&m)&&l.push(r))}),[m,g,a,r,l,p]),{user:p,mutateUser:f,isLoggedIn:m}}},43921:function(e,t,r){"use strict";r.r(t);var n=r(92809),i=r(30266),o=r(809),u=r.n(o),c=r(67294),s=r(77290),a=r(39983),l=r(85893);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=["phoneNumber","realname","residentRegistrationNumber","licenseNumber","licenseType","insuranceNumber"],h=["insuranceExpirationDate"];t.default=function(){var e=(0,a.Z)({redirectTo:"/login"}).isAdminLoggedIn,t=(0,c.useCallback)(function(){var e=(0,i.Z)(u().mark((function e(t){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=Array.from(t.currentTarget.querySelectorAll("input")).reduce((function(e,t){return p(p({},e),{},(0,n.Z)({},t.name,t.value))}),{}),e.prev=2,e.next=5,s.Z.post("/users",r).then((function(e){return e.data}));case 5:i=e.sent,console.log("createdUser",i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),r=(0,c.useCallback)(function(){var e=(0,i.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=new FormData(t.currentTarget),e.prev=2,e.next=5,s.Z.post("/users/admin",{phoneNumber:r.get("phoneNumber")}).then((function(e){return e.data}));case 5:n=e.sent,console.log("admin \uc0dd\uc131\uc644\ub8cc:",n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);return e?(0,l.jsxs)("div",{style:{display:"flex",padding:"1rem",border:"1px solid black"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"\uc720\uc800 \uc0dd\uc131"}),(0,l.jsxs)("form",{action:"",onSubmit:t,style:{width:"fit-content",padding:"1.33rem"},children:[f.map((function(e,t){return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:e,style:{width:"200px",display:"inline-block",marginRight:"1rem",textAlign:"right"},children:"".concat(e,": ")}),(0,l.jsx)("input",{type:"text",id:e+t,name:e,required:!0})]},e+t)})),h.map((function(e,t){return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:e,style:{width:"200px",display:"inline-block",marginRight:"1rem",textAlign:"right"},children:"".concat(e,": ")}),(0,l.jsx)("input",{type:"date",id:e+t,name:e,required:!0})]},e+t)})),(0,l.jsx)("button",{type:"submit",style:{marginTop:"1rem",float:"right"},children:"\uc720\uc800 \uc0dd\uc131"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"\uc5b4\ub4dc\ubbfc \uc0dd\uc131"}),(0,l.jsxs)("form",{action:"",onSubmit:r,style:{width:"fit-content",padding:"1.33rem"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"phoneNumber",style:{width:"200px",display:"inline-block",marginRight:"1rem",textAlign:"right"},children:"phoneNumber:"}),(0,l.jsx)("input",{type:"text",id:"phoneNumber",name:"phoneNumber",required:!0})]}),(0,l.jsx)("button",{type:"submit",style:{marginTop:"1rem",float:"right"},children:"\uc5b4\ub4dc\ubbfc \uc0dd\uc131"})]})]})]}):null}},77290:function(e,t,r){"use strict";var n=r(9669),i=r.n(n)().create({baseURL:"http://localhost:8001",withCredentials:!0});t.Z=i},82780:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});var n=r(77290),i=function(e){return n.Z.get(e).then((function(e){return e.data}))}},94449:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/temp",function(){return r(43921)}])},30266:function(e,t,r){"use strict";function n(e,t,r,n,i,o,u){try{var c=e[o](u),s=c.value}catch(a){return void r(a)}c.done?t(s):Promise.resolve(s).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var u=e.apply(t,r);function c(e){n(u,i,o,c,s,"next",e)}function s(e){n(u,i,o,c,s,"throw",e)}c(void 0)}))}}r.d(t,{Z:function(){return i}})}},function(e){e.O(0,[400,774,888,179],(function(){return t=94449,e(e.s=t);var t}));var t=e.O();_N_E=t}]);