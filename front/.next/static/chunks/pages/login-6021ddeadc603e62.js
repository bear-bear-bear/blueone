(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{87217:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var t=r(67294),o=r(11163),i=r(40821),s=r(82780),u="/user",a={onErrorRetry:function(e,n,r,t,o){var i=o.retryCount;n!==u&&(i>=10||setTimeout((function(){return t({retryCount:i})}),5e3))}};function c(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.redirectTo,c=n.redirectIfFound,l=(0,o.useRouter)(),d=(0,i.ZP)(u,s.F,a),f=d.data,p=d.mutate,m=d.error,h=!m&&!!f,g=!m&&!f;return console.group('SWR Fetched "/user"'),console.log("data:",f),console.log("error:",null===m||void 0===m||null===(e=m.response)||void 0===e?void 0:e.data.message),console.log("isLoggedIn:",h),console.log("isNotFetched:",g),console.groupEnd(),(0,t.useEffect)((function(){r&&(g||(!c&&!h||c&&h)&&l.push(r))}),[h,g,c,r,l,f]),{user:f,mutateUser:p,isLoggedIn:h}}},3308:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return L}});var t,o,i,s=r(67294),u=r(11163),a=r(87217),c=r(92809),l=(r(29809),r(97538)),d=(r(1025),r(65400)),f=(r(89858),r(51024)),p=(r(75314),r(11187)),m=r(30266),h=r(809),g=r.n(h),b=r(77290),v=r(52209),w=r(95934),j=(0,w.Z)(l.Z.Item)(t||(t=(0,v.Z)(["\n  margin-bottom: 0.66rem;\n\n  .ant-form-item-label {\n    padding: 0;\n  }\n"]))),Z=(0,w.Z)(l.Z.Item)(o||(o=(0,v.Z)(["\n  margin-top: 2rem;\n  margin-bottom: 0;\n"]))),y=(0,w.Z)(f.default)(i||(i=(0,v.Z)(["\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"]))),x=r(85893);function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var _,P,E,C={labelCol:{span:5},wrapperCol:{flex:"auto"}},N=function(){var e=(0,u.useRouter)(),n=function(){var n=(0,m.Z)(g().mark((function n(r){var t,o,i;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.Z.post("/user/login",r).then((function(e){return e.data}));case 3:t=n.sent,n.t0=t.role,n.next="admin"===n.t0?7:"user"===n.t0?9:11;break;case 7:return e.push("/"),n.abrupt("break",11);case 9:return e.push("worker"),n.abrupt("break",11);case 11:n.next=18;break;case 13:n.prev=13,n.t1=n.catch(0),i=null===(o=n.t1.response)||void 0===o?void 0:o.data.message,p.default.error(i),console.error(i);case 18:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}();return(0,x.jsxs)(l.Z,k(k({name:"login-form",initialValues:{remember:!0},onFinish:n,autoComplete:"off"},C),{},{children:[(0,x.jsx)(j,{label:"\uc804\ud654\ubc88\ud638",name:"phoneNumber",rules:[{required:!0,message:"\uc804\ud654\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}],children:(0,x.jsx)(y,{type:"number",autoComplete:"off",size:"large"})}),(0,x.jsx)(j,{label:"\ube44\ubc00\ubc88\ud638",name:"password",rules:[{required:!0,message:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}],children:(0,x.jsx)(f.default.Password,{autoComplete:"off",size:"large"})}),(0,x.jsx)(Z,{children:(0,x.jsx)(d.default,{type:"primary",htmlType:"submit",size:"large",block:!0,children:"\ub85c\uadf8\uc778"})})]}))},F=r(25675),I=r(54528),R=w.Z.section(_||(_=(0,v.Z)(["\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),T=w.Z.section(P||(P=(0,v.Z)(["\n  width: 100%;\n  padding: 1.33rem;\n\n  "," {\n    border: 1px solid #ddd;\n    border-radius: 2px;\n    width: 27rem;\n  }\n"])),I.Z.sm),z=w.Z.header(E||(E=(0,v.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 0.66rem;\n  padding: 0.33rem 0;\n  gap: 1rem;\n\n  h1 {\n    font-size: 1.1rem;\n  }\n\n  "," {\n    margin-bottom: 1.33rem;\n  }\n"])),I.Z.sm),D=function(e){var n=e.children;return(0,x.jsx)(R,{children:(0,x.jsxs)(T,{children:[(0,x.jsx)(z,{children:(0,x.jsx)(F.default,{src:"/logo_fill.svg",alt:"\ub85c\uace0",width:120,height:20})}),n]})})},L=function(){var e=(0,u.useRouter)(),n=(0,a.Z)(),r=n.user,t=n.isLoggedIn;return(0,s.useEffect)((function(){t&&("admin"===(null===r||void 0===r?void 0:r.role)?e.push("/"):e.push("/worker"))}),[t,e,r]),(0,x.jsx)(D,{children:(0,x.jsx)(N,{})})}},77290:function(e,n,r){"use strict";var t=r(9669),o=r.n(t)().create({baseURL:"http://localhost:8001",withCredentials:!0});n.Z=o},82780:function(e,n,r){"use strict";r.d(n,{F:function(){return o}});var t=r(77290),o=function(e){return t.Z.get(e).then((function(e){return e.data}))}},87237:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(3308)}])}},function(e){e.O(0,[400,597,980,716,675,774,888,179],(function(){return n=87237,e(e.s=n);var n}));var n=e.O();_N_E=n}]);